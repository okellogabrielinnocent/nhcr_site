<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="IntraHealth">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Internals - NHCR (Uganda) Documentation</title>
  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Internals";
    var mkdocs_page_input_path = "admin/internals.md";
    var mkdocs_page_url = "/planetsystems/OpenCR/admin/internals/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> NHCR (Uganda) Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Home</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../..">Welcome!</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">User</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../user/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/process/">Matching Process</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/recordlinkage/">Record Linkage Process</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/usecases/">Use Cases</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/ui/">UI -- Basics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/ui-advanced/">UI -- Human Adjudication</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/openmrs/">OpenMRS MPI Client</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/cruid/">Unique Identifiers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/algos/">Intro to Algorithms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/supported/">Supported Algorithms</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Implementer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../user/guide/">OpenHIE Implementation Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../impl/roles/">Roles and Responsibilities</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user/resources/">Additional Resources</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../dev/addalgos/">Add Algorithms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/docs/">Building Documentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/license/">License</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/contributing/">Contributing</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Sysadmin</span>
    <ul class="subnav">
                <li class=" current">
                    
    <span class="caption-text">Introduction</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../architecture/">Architecture</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../proficiencies/">Proficiencies</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Internals</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#internals">Internals</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#elasticsearch">ElasticSearch</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Getting Started (Docker)</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../docker/">Local Installation using Docker</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../queries/">Example API Query (cURL)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../notebooks/basic_query_in_python.ipynb">None</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../decision_rules/">Decision Rules</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../requirements/">System Requirements</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../method/">Choosing a Method</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../configuration/">Configuration</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../installation/">Local Installation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../installation_full/">Server Installation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../ansible/">Ansible</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Load Bulk Data</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../loadjs/">Load Demo Data (JavaScript)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../notebooks/load_bulk_data_in_python.ipynb">None</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Production Considerations</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../security/">Security</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../backup/">Backup and Recovery</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../troubleshooting/">Troubleshooting</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">NHCR (Uganda) Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Introduction &raquo;</li>
        
      
        
          <li>Sysadmin &raquo;</li>
        
      
    
    <li>Internals</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/planetsystems/OpenCR/edit/master/docs/admin/internals.md"> Edit on ministryofhealth/nhcr</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="internals">Internals</h1>
<h2 id="elasticsearch">ElasticSearch</h2>
<p>ES is a web service around the Apache Software Foundation-supported Lucene search engine. ES provides a JSON-based REST API, cluster management, and other value-add on top of Lucene. Many of the features discussed below are actually in Lucene, and are not specific to ES, although these docs refer to ES as including Lucene features. This can be confusing. ES means ES which includes Lucene.</p>
<h3 id="mapping">Mapping</h3>
<p>Data fields to be indexed in ES require that they first be mapped. The CR mediator takes a mapping config file and generates the mapping based on it. Then, records are submitted to and indexed by ES. Indexes are created separated into segments. Segments can be on one system or across server nodes in cluster. When searches happen, the segments are searched in parallel, and then the results merged. </p>
<p>For more information, see: Elasticsearch from the bottom up (EuroPython 2014 - Start at 18:28 unless you want to get deep into Lucene.): https://www.youtube.com/watch?v=PpX7J-G2PEo</p>
<h3 id="es-filters-versus-queries">ES Filters versus Queries</h3>
<p>An important distinction is between filters and queries in ES. For CR purposes, filters can be used for blocking. Queries result in a score that is assigned to the result based on how well it matches the query. For more, eee: https://logz.io/blog/elasticsearch-queries/ Note that filters are cached, and thus faster. Also, query clauses can be used as either a filter or a query. Since filters are boolean (true/false), they are not scored.</p>
<p>There are queries of diverse types, including Boolean, compound (chaining queries together), fuzzy matching, and other types. Queries result in a score that is assigned to the result based on how well it matches the query. With regard to risk for the Uganda use case, we have included blocking (filters) to meet the use requirements and the required query types.</p>
<p>For more, see <a href="https://logz.io/blog/elasticsearch-queries/">ElasticSearch Queries</a>
And the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">ES Query Domain Specific Language (DSL)</a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../docker/" class="btn btn-neutral float-right" title="Local Installation using Docker">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../proficiencies/" class="btn btn-neutral" title="Proficiencies"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2022 MoH</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../proficiencies/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../docker/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
